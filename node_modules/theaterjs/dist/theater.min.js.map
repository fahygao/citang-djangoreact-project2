{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///theater.min.js","webpack:///webpack/bootstrap ac51a64e251c444904fa","webpack:///./src/theaterJS.js","webpack:///./src/helpers/type.js","webpack:///./src/helpers/utils.js","webpack:///./src/actor.js","webpack:///./src/helpers/html.js","webpack:///./src/helpers/keyboard.js","webpack:///./src/keyboards.json","webpack:///./src/void-elements.json"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_toArray","theaterJS","addActor","actorName","options","arguments","undefined","callback","a","_actor2","props","casting","name","setCurrentActor","onStage","getCurrentActor","addScene","addSceneToSequence","scene","_helpersType2","forEach","s","isString","partials","split","charAt","shift","actor","speech","join","replace","sceneObj","args","isFunction","isNumber","isObject","unshift","publish","playNextScene","sequence","push","_len","scenes","_key","concat","prototype","apply","scenario","autoplay","play","getCurrentSpeech","currentScene","_currentScene$args","_slicedToArray","status","replay","done","stop","nextScene","_nextScene$args","slice","typeAction","eraseAction","callbackAction","waitAction","console","debug","value","locale","minSpeed","type","maxSpeed","initialValue","displayValue","cursor","isFixing","previousMistakeCursor","previousFixCursor","htmlMap","_helpersHtml2","map","strip","actual","substr","expected","isMistaking","shouldBeMistaken","shouldFix","inject","nextChar","_helpersKeyboard2","randomCharNear","setTimeout","getTypingSpeed","arg","erase","speed","nbCharactersToErase","delay","bind","subscribe","events","eventName","trim","_len2","_key2","callbacks","_helpersUtils2","merge","DEFAULTS","_options","_options2","NAVIGATOR","languages","supports","defaultLocale","Object","freeze","defineProperties","on","get","configurable","enumerable","defineProperty","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","err","TypeError","_actor","_helpersUtils","_helpersType","_helpersKeyboard","_helpersHtml","window","navigator","init","theater","accuracy","toString","o","dst","objs","len","key","hasOwnProperty","random","min","max","Math","floor","randomFloat","getPercentageOf","percentage","DOCUMENT","document","$element","selector","$e","querySelector","Error","newValue","innerHTML","log","fastest","slowest","endValue","nbOfCharactersTyped","maxWrongCharactersAllowed","minCharactersBetweenMistakes","set","isVoidElement","tag","tagName","match","Boolean","_voidElementsJson2","indexOf","toLowerCase","_voidElementsJson","str","regexp","tags","openers","result","exec","position","index","opener","pop","mapKeyboard","alphabet","keyboard","y","lines","chars","x","charsLength","_type","_type2","_utils","_utils2","_keyboardsJson","_keyboardsJson2","DEFAULT_LOCALE","list","mapped","ch","threshold","nearbyChars","uppercase","test","charPosition","abs","randomChar","toUpperCase","en","fr","da","de","pl","pt","ru","es","el"],"mappings":"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","file":"theater.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"theaterJS\"] = factory();\n\telse\n\t\troot[\"theaterJS\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"theaterJS\"] = factory();\n\telse\n\t\troot[\"theaterJS\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!**************************!*\\\n  !*** ./src/theaterJS.js ***!\n  \\**************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\t\n\tvar _actor = __webpack_require__(/*! ./actor */ 3);\n\t\n\tvar _actor2 = _interopRequireDefault(_actor);\n\t\n\tvar _helpersUtils = __webpack_require__(/*! ./helpers/utils */ 2);\n\t\n\tvar _helpersUtils2 = _interopRequireDefault(_helpersUtils);\n\t\n\tvar _helpersType = __webpack_require__(/*! ./helpers/type */ 1);\n\t\n\tvar _helpersType2 = _interopRequireDefault(_helpersType);\n\t\n\tvar _helpersKeyboard = __webpack_require__(/*! ./helpers/keyboard */ 5);\n\t\n\tvar _helpersKeyboard2 = _interopRequireDefault(_helpersKeyboard);\n\t\n\tvar _helpersHtml = __webpack_require__(/*! ./helpers/html */ 4);\n\t\n\tvar _helpersHtml2 = _interopRequireDefault(_helpersHtml);\n\t\n\tvar NAVIGATOR = typeof window !== 'undefined' && window.navigator;\n\tvar DEFAULTS = {\n\t  autoplay: true,\n\t  erase: true,\n\t  minSpeed: { erase: 80, type: 80 },\n\t  maxSpeed: { erase: 450, type: 450 },\n\t  locale: 'detect'\n\t};\n\t\n\tfunction theaterJS() {\n\t  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t  /* ------------------------------------------------- *\\\n\t    init\n\t  \\* ------------------------------------------------- */\n\t\n\t  options = _helpersUtils2['default'].merge({}, DEFAULTS, options);\n\t\n\t  if (_helpersType2['default'].isNumber(options.minSpeed)) {\n\t    var _options = options;\n\t    var minSpeed = _options.minSpeed;\n\t\n\t    options.minSpeed = { erase: minSpeed, type: minSpeed };\n\t  }\n\t\n\t  if (_helpersType2['default'].isNumber(options.maxSpeed)) {\n\t    var _options2 = options;\n\t    var maxSpeed = _options2.maxSpeed;\n\t\n\t    options.maxSpeed = { erase: maxSpeed, type: maxSpeed };\n\t  }\n\t\n\t  if (options.locale === 'detect' && NAVIGATOR) {\n\t    var languages = NAVIGATOR.languages;\n\t    if (_helpersType2['default'].isArray(languages) && _helpersType2['default'].isString(languages[0])) {\n\t      options.locale = languages[0].substr(0, 2);\n\t    }\n\t  }\n\t\n\t  if (!_helpersKeyboard2['default'].supports(options.locale)) {\n\t    options.locale = _helpersKeyboard2['default'].defaultLocale;\n\t  }\n\t\n\t  var props = { options: options, casting: {}, status: 'ready', onStage: null, currentScene: -1, scenario: [], events: {} };\n\t  setCurrentActor(null);\n\t\n\t  /* ------------------------------------------------- *\\\n\t    methods\n\t  \\* ------------------------------------------------- */\n\t\n\t  function addActor(actorName) {\n\t    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t    var callback = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\t\n\t    var a = (0, _actor2['default'])(actorName, options, callback);\n\t    props.casting[a.name] = a;\n\t\n\t    return this;\n\t  }\n\t\n\t  function setCurrentActor(actorName) {\n\t    props.onStage = actorName;\n\t    return this;\n\t  }\n\t\n\t  function getCurrentActor() {\n\t    return props.casting[props.onStage] || null;\n\t  }\n\t\n\t  function addScene() {\n\t    var sequence = [];\n\t\n\t    function addSceneToSequence(scene) {\n\t      if (_helpersType2['default'].isArray(scene)) {\n\t        scene.forEach(function (s) {\n\t          addSceneToSequence(s);\n\t        });\n\t      }\n\t\n\t      if (_helpersType2['default'].isString(scene)) {\n\t        var partials = scene.split(':');\n\t\n\t        var actorName = undefined;\n\t        if (partials.length > 1 && partials[0].charAt(partials[0].length - 1) !== '\\\\') {\n\t          actorName = partials.shift();\n\t\n\t          addSceneToSequence({ name: 'erase', actor: actorName });\n\t        }\n\t\n\t        var speech = partials.join(':').replace(/\\\\:/g, ':');\n\t        var sceneObj = { name: 'type', args: [speech] };\n\t\n\t        if (actorName != null) {\n\t          sceneObj.actor = actorName;\n\t        }\n\t\n\t        addSceneToSequence(sceneObj);\n\t      }\n\t\n\t      if (_helpersType2['default'].isFunction(scene)) {\n\t        addSceneToSequence({ name: 'callback', args: [scene] });\n\t      }\n\t\n\t      if (_helpersType2['default'].isNumber(scene)) {\n\t        if (scene > 0) {\n\t          addSceneToSequence({ name: 'wait', args: [scene] });\n\t        } else {\n\t          addSceneToSequence({ name: 'erase', args: [scene] });\n\t        }\n\t      }\n\t\n\t      if (_helpersType2['default'].isObject(scene)) {\n\t        if (!_helpersType2['default'].isArray(scene.args)) {\n\t          scene.args = [];\n\t        }\n\t\n\t        scene.args.unshift(function () {\n\t          publish(scene.name + ':end', scene);\n\t          playNextScene();\n\t        });\n\t\n\t        sequence.push(scene);\n\t      }\n\t    }\n\t\n\t    for (var _len = arguments.length, scenes = Array(_len), _key = 0; _key < _len; _key++) {\n\t      scenes[_key] = arguments[_key];\n\t    }\n\t\n\t    addSceneToSequence([{ name: 'publisher', args: ['sequence:start'] }].concat(scenes).concat({ name: 'publisher', args: ['sequence:end'] }));\n\t    Array.prototype.push.apply(props.scenario, sequence);\n\t\n\t    if (props.options.autoplay) {\n\t      play();\n\t    }\n\t\n\t    return this;\n\t  }\n\t\n\t  function getCurrentSpeech() {\n\t    var currentScene = props.scenario[props.currentScene];\n\t    if (!currentScene || !_helpersType2['default'].isArray(currentScene.args)) return null;\n\t\n\t    var _currentScene$args = _slicedToArray(currentScene.args, 2);\n\t\n\t    var speech = _currentScene$args[1];\n\t\n\t    return speech || null;\n\t  }\n\t\n\t  function play() {\n\t    if (props.status === 'stopping') {\n\t      props.status = 'playing';\n\t    }\n\t\n\t    if (props.status === 'ready') {\n\t      props.status = 'playing';\n\t      playNextScene();\n\t    }\n\t\n\t    return this;\n\t  }\n\t\n\t  function replay(done) {\n\t    if (props.status === 'ready' || _helpersType2['default'].isFunction(done)) {\n\t      props.currentScene = -1;\n\t\n\t      if (props.status === 'ready') play();else done();\n\t    }\n\t\n\t    return this;\n\t  }\n\t\n\t  function stop() {\n\t    props.status = 'stopping';\n\t    return this;\n\t  }\n\t\n\t  function playNextScene() {\n\t    if (props.status === 'stopping') {\n\t      props.status = 'ready';\n\t      return this;\n\t    }\n\t\n\t    if (props.status !== 'playing') return this;\n\t\n\t    if (props.currentScene + 1 >= props.scenario.length) {\n\t      props.status = 'ready';\n\t      publish('scenario:end');\n\t      return this;\n\t    }\n\t\n\t    var nextScene = props.scenario[++props.currentScene];\n\t\n\t    if (props.currentScene === 0) {\n\t      publish('scenario:start');\n\t    }\n\t\n\t    if (nextScene.name === 'publisher') {\n\t      var _nextScene$args = _toArray(nextScene.args);\n\t\n\t      var done = _nextScene$args[0];\n\t\n\t      var args = _nextScene$args.slice(1);\n\t\n\t      publish.apply(undefined, _toConsumableArray(args));\n\t\n\t      return done();\n\t    }\n\t\n\t    if (nextScene.actor) {\n\t      setCurrentActor(nextScene.actor);\n\t    }\n\t\n\t    publish(nextScene.name + ':start', nextScene);\n\t\n\t    switch (nextScene.name) {\n\t      case 'type':\n\t        typeAction.apply(undefined, _toConsumableArray(nextScene.args));\n\t        break;\n\t\n\t      case 'erase':\n\t        eraseAction.apply(undefined, _toConsumableArray(nextScene.args));\n\t        break;\n\t\n\t      case 'callback':\n\t        callbackAction.apply(undefined, _toConsumableArray(nextScene.args));\n\t        break;\n\t\n\t      case 'wait':\n\t        waitAction.apply(undefined, _toConsumableArray(nextScene.args));\n\t        break;\n\t\n\t      default:\n\t        console.debug('No scene handler for ' + nextScene.name);\n\t        break;\n\t    }\n\t\n\t    return this;\n\t  }\n\t\n\t  function typeAction(done, value) {\n\t    var actor = getCurrentActor();\n\t\n\t    var locale = props.options.locale;\n\t    var minSpeed = props.options.minSpeed.type;\n\t    var maxSpeed = props.options.maxSpeed.type;\n\t    var initialValue = actor.displayValue;\n\t    var cursor = -1;\n\t    var isFixing = false;\n\t    var previousMistakeCursor = null;\n\t    var previousFixCursor = null;\n\t\n\t    var htmlMap = _helpersHtml2['default'].map(value);\n\t    value = _helpersHtml2['default'].strip(value);(function type() {\n\t      var actual = _helpersHtml2['default'].strip(actor.displayValue.substr(initialValue.length));\n\t\n\t      if (actual === value) return done();\n\t\n\t      var expected = value.substr(0, cursor + 1);\n\t\n\t      var isMistaking = actual !== expected;\n\t      var shouldBeMistaken = actor.shouldBeMistaken(actual, value, previousMistakeCursor, previousFixCursor);\n\t      var shouldFix = isFixing || !shouldBeMistaken;\n\t\n\t      if (isMistaking && shouldFix) {\n\t        isFixing = true;\n\t        previousMistakeCursor = null;\n\t        actor.displayValue = initialValue + _helpersHtml2['default'].inject(actual.substr(0, actual.length - 1), htmlMap);\n\t        cursor--;\n\t        previousFixCursor = cursor;\n\t      } else {\n\t        isFixing = false;\n\t        var nextChar = value.charAt(++cursor);\n\t\n\t        if (shouldBeMistaken) {\n\t          nextChar = _helpersKeyboard2['default'].randomCharNear(nextChar, locale);\n\t\n\t          if (previousMistakeCursor == null) {\n\t            previousMistakeCursor = cursor;\n\t          }\n\t        }\n\t\n\t        actor.displayValue = initialValue + _helpersHtml2['default'].inject(actual + nextChar, htmlMap);\n\t      }\n\t\n\t      return setTimeout(type, actor.getTypingSpeed(minSpeed, maxSpeed));\n\t    })();\n\t\n\t    return this;\n\t  }\n\t\n\t  function eraseAction(done, arg) {\n\t    var actor = getCurrentActor();\n\t\n\t    // erase scenes are added before a type scene\n\t    // so for the first scene, there's no actor yet\n\t    if (actor == null) {\n\t      return done();\n\t    }\n\t\n\t    if (options.erase !== true) {\n\t      actor.displayValue = '';\n\t      return done();\n\t    }\n\t\n\t    var minSpeed = props.options.minSpeed.erase;\n\t    var maxSpeed = props.options.maxSpeed.erase;\n\t\n\t    var value = actor.displayValue;\n\t    var htmlMap = _helpersHtml2['default'].map(value);\n\t\n\t    value = _helpersHtml2['default'].strip(value);\n\t\n\t    var cursor = value.length;\n\t\n\t    var speed = undefined;\n\t    var nbCharactersToErase = 0;\n\t\n\t    if (_helpersType2['default'].isNumber(arg)) {\n\t      if (arg > 0) speed = arg;else nbCharactersToErase = value.length + arg;\n\t    }\n\t\n\t    (function erase() {\n\t      if (cursor === nbCharactersToErase) return done();\n\t      actor.displayValue = _helpersHtml2['default'].inject(value.substr(0, --cursor), htmlMap);\n\t\n\t      return setTimeout(erase, speed || actor.getTypingSpeed(minSpeed, maxSpeed));\n\t    })();\n\t\n\t    return this;\n\t  }\n\t\n\t  function callbackAction(done, callback) {\n\t    callback.call(this, done);\n\t    return this;\n\t  }\n\t\n\t  function waitAction(done, delay) {\n\t    setTimeout(done.bind(this), delay);\n\t    return this;\n\t  }\n\t\n\t  function subscribe(events, callback) {\n\t    events.split(',').forEach(function (eventName) {\n\t      eventName = eventName.trim();\n\t\n\t      if (!_helpersType2['default'].isArray(props.events[eventName])) {\n\t        props.events[eventName] = [];\n\t      }\n\t\n\t      props.events[eventName].push(callback);\n\t    });\n\t\n\t    return this;\n\t  }\n\t\n\t  function publish() {\n\t    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t      args[_key2] = arguments[_key2];\n\t    }\n\t\n\t    var eventName = args[0];\n\t    var callbacks = props.events[eventName] || [];\n\t\n\t    if (callbacks.length > 0) {\n\t      callbacks.concat(props.events['*'] || []).forEach(function (callback) {\n\t        return callback.apply(undefined, args);\n\t      });\n\t    }\n\t\n\t    return this;\n\t  }\n\t\n\t  /* ------------------------------------------------- *\\\n\t    public api\n\t  \\* ------------------------------------------------- */\n\t\n\t  return Object.freeze(Object.defineProperties({\n\t    addActor: addActor,\n\t    getCurrentActor: getCurrentActor,\n\t    addScene: addScene,\n\t    getCurrentSpeech: getCurrentSpeech,\n\t    play: play,\n\t    replay: replay,\n\t    stop: stop,\n\t    on: subscribe\n\t  }, {\n\t    options: {\n\t      get: function get() {\n\t        return props.options;\n\t      },\n\t      configurable: true,\n\t      enumerable: true\n\t    },\n\t    status: {\n\t      get: function get() {\n\t        return props.status;\n\t      },\n\t      configurable: true,\n\t      enumerable: true\n\t    }\n\t  }));\n\t}\n\t\n\ttheaterJS.init = function () {\n\t  var actorName = arguments.length <= 0 || arguments[0] === undefined ? 'actor' : arguments[0];\n\t\n\t  var theater = theaterJS();\n\t  theater.addActor(actorName, { accuracy: 1, speed: 0.8 });\n\t  return theater;\n\t};\n\t\n\texports['default'] = theaterJS;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 1 */\n/*!*****************************!*\\\n  !*** ./src/helpers/type.js ***!\n  \\*****************************/\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\tfunction toString(o) {\n\t  return ({}).toString.call(o);\n\t}\n\t\n\texports['default'] = {\n\t  isNumber: function isNumber(o) {\n\t    return typeof o === 'number';\n\t  },\n\t\n\t  isString: function isString(o) {\n\t    return toString(o) === '[object String]';\n\t  },\n\t\n\t  isObject: function isObject(o) {\n\t    return toString(o) === '[object Object]';\n\t  },\n\t\n\t  isArray: function isArray(o) {\n\t    return toString(o) === '[object Array]';\n\t  },\n\t\n\t  isFunction: function isFunction(o) {\n\t    return typeof o === 'function';\n\t  }\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 2 */\n/*!******************************!*\\\n  !*** ./src/helpers/utils.js ***!\n  \\******************************/\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports[\"default\"] = {\n\t  merge: function merge(dst) {\n\t    var objs = [].slice.call(arguments, 1);\n\t\n\t    for (var i = 0, len = objs.length; i < len; i++) {\n\t      var obj = objs[i];\n\t\n\t      for (var key in obj) {\n\t        if (!obj.hasOwnProperty(key)) continue;\n\t        dst[key] = obj[key];\n\t      }\n\t    }\n\t\n\t    return dst;\n\t  },\n\t\n\t  random: function random(min, max) {\n\t    return Math.floor(Math.random() * (max - min + 1)) + min;\n\t  },\n\t\n\t  randomFloat: function randomFloat(min, max) {\n\t    return Math.random() * (max - min) + min;\n\t  },\n\t\n\t  getPercentageOf: function getPercentageOf(min, max, percentage) {\n\t    return min - min * percentage + max * percentage;\n\t  }\n\t};\n\tmodule.exports = exports[\"default\"];\n\n/***/ }),\n/* 3 */\n/*!**********************!*\\\n  !*** ./src/actor.js ***!\n  \\**********************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _helpersType = __webpack_require__(/*! ./helpers/type */ 1);\n\t\n\tvar _helpersType2 = _interopRequireDefault(_helpersType);\n\t\n\tvar _helpersUtils = __webpack_require__(/*! ./helpers/utils */ 2);\n\t\n\tvar _helpersUtils2 = _interopRequireDefault(_helpersUtils);\n\t\n\tvar DOCUMENT = typeof window !== 'undefined' && window.document;\n\tvar DEFAULTS = { speed: 0.6, accuracy: 0.6 };\n\t\n\texports['default'] = function (actorName) {\n\t  var props = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t  var callback = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\t\n\t  var displayValue = '';\n\t  var $element = undefined;\n\t\n\t  if (_helpersType2['default'].isNumber(props)) {\n\t    props = { speed: props, accuracy: props };\n\t  }\n\t\n\t  props = _helpersUtils2['default'].merge({}, DEFAULTS, props);\n\t\n\t  if (DOCUMENT) {\n\t    if (callback == null) {\n\t      callback = '#' + actorName;\n\t    }\n\t\n\t    if (_helpersType2['default'].isString(callback)) {\n\t      var selector = callback;\n\t      var $e = DOCUMENT.querySelector(selector);\n\t\n\t      if ($e != null) {\n\t        $element = $e;\n\t        callback = function (newValue) {\n\t          $element.innerHTML = newValue;\n\t        };\n\t      } else {\n\t        throw new Error('no matches for ' + actorName + '\\'s selector: ' + selector);\n\t      }\n\t    }\n\t  }\n\t\n\t  if (!_helpersType2['default'].isFunction(callback)) {\n\t    callback = console.log.bind(console);\n\t  }\n\t\n\t  return Object.defineProperties({\n\t    $element: $element,\n\t\n\t    getTypingSpeed: function getTypingSpeed(fastest, slowest) {\n\t      var speed = _helpersUtils2['default'].randomFloat(props.speed, 1);\n\t      return _helpersUtils2['default'].getPercentageOf(slowest, fastest, speed);\n\t    },\n\t\n\t    shouldBeMistaken: function shouldBeMistaken(actual, endValue) {\n\t      var previousMistakeCursor = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\t      var previousFixCursor = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];\n\t\n\t      var accuracy = props.accuracy * 10;\n\t\n\t      if (accuracy >= 8) {\n\t        return false;\n\t      }\n\t\n\t      if (actual.length <= accuracy) {\n\t        return false;\n\t      }\n\t\n\t      if (actual.length === endValue.length) {\n\t        return false;\n\t      }\n\t\n\t      if (_helpersType2['default'].isNumber(previousMistakeCursor)) {\n\t        var nbOfCharactersTyped = actual.length - previousMistakeCursor;\n\t        var maxWrongCharactersAllowed = accuracy >= 6 ? 10 - accuracy : 4;\n\t\n\t        if (nbOfCharactersTyped >= maxWrongCharactersAllowed) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      if (_helpersType2['default'].isNumber(previousFixCursor)) {\n\t        var nbOfCharactersTyped = actual.length - previousFixCursor;\n\t        var minCharactersBetweenMistakes = Math.max(accuracy, 2) * 2;\n\t\n\t        if (nbOfCharactersTyped <= minCharactersBetweenMistakes) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      return _helpersUtils2['default'].randomFloat(0, 0.8) > props.accuracy;\n\t    }\n\t  }, {\n\t    displayValue: {\n\t      get: function get() {\n\t        return displayValue;\n\t      },\n\t      set: function set(value) {\n\t        displayValue = value;\n\t        callback(value);\n\t      },\n\t      configurable: true,\n\t      enumerable: true\n\t    },\n\t    name: {\n\t      get: function get() {\n\t        return actorName;\n\t      },\n\t      configurable: true,\n\t      enumerable: true\n\t    }\n\t  });\n\t};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 4 */\n/*!*****************************!*\\\n  !*** ./src/helpers/html.js ***!\n  \\*****************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _voidElementsJson = __webpack_require__(/*! ../void-elements.json */ 7);\n\t\n\tvar _voidElementsJson2 = _interopRequireDefault(_voidElementsJson);\n\t\n\tfunction isVoidElement(tag) {\n\t  var tagName = tag.match(/<([^\\s>]+)/);\n\t  return Boolean(tagName) && _voidElementsJson2['default'].indexOf(tagName[1].toLowerCase()) > -1;\n\t}\n\t\n\texports['default'] = {\n\t  strip: function strip(str) {\n\t    return str.replace(/(<([^>]+)>)/gi, '');\n\t  },\n\t\n\t  map: function map(str) {\n\t    var regexp = /<[^>]+>/gi;\n\t    var tags = [];\n\t    var openers = [];\n\t    var result = undefined;\n\t    var tag = undefined;\n\t\n\t    while (result = regexp.exec(str)) {\n\t      tag = {\n\t        tagName: result[0],\n\t        position: result.index\n\t      };\n\t\n\t      if (tag.tagName.charAt(1) === '/') {\n\t        tag.opener = openers.pop();\n\t      } else if (tag.tagName.charAt(tag.tagName.length - 2) !== '/' && !isVoidElement(tag.tagName)) {\n\t        openers.push(tag);\n\t      }\n\t\n\t      tags.push(tag);\n\t    }\n\t\n\t    return tags;\n\t  },\n\t\n\t  inject: function inject(str, map) {\n\t    for (var i = 0, tag = undefined; i < map.length; i++) {\n\t      tag = map[i];\n\t\n\t      if (str.length > 0 && tag.position <= str.length) {\n\t        str = str.substr(0, tag.position) + tag.tagName + str.substr(tag.position);\n\t      } else if (tag.opener && tag.opener.position < str.length) {\n\t        str += tag.tagName;\n\t      }\n\t    }\n\t\n\t    return str;\n\t  }\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 5 */\n/*!*********************************!*\\\n  !*** ./src/helpers/keyboard.js ***!\n  \\*********************************/\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t  value: true\n\t});\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _type = __webpack_require__(/*! ./type */ 1);\n\t\n\tvar _type2 = _interopRequireDefault(_type);\n\t\n\tvar _utils = __webpack_require__(/*! ./utils */ 2);\n\t\n\tvar _utils2 = _interopRequireDefault(_utils);\n\t\n\tvar _keyboardsJson = __webpack_require__(/*! ../keyboards.json */ 6);\n\t\n\tvar _keyboardsJson2 = _interopRequireDefault(_keyboardsJson);\n\t\n\tvar DEFAULT_LOCALE = 'en';\n\t\n\tfor (var locale in _keyboardsJson2['default']) {\n\t  if (!_keyboardsJson2['default'].hasOwnProperty(locale)) continue;\n\t\n\t  var keyboard = _keyboardsJson2['default'][locale];\n\t  _keyboardsJson2['default'][locale] = { list: keyboard, mapped: mapKeyboard(keyboard) };\n\t}\n\t\n\tfunction mapKeyboard(alphabet) {\n\t  var keyboard = {};\n\t\n\t  for (var y = 0, lines = alphabet.length, chars = undefined; y < lines; y++) {\n\t    chars = alphabet[y];\n\t\n\t    for (var x = 0, charsLength = chars.length; x < charsLength; x++) {\n\t      keyboard[chars[x]] = { x: x, y: y };\n\t    }\n\t  }\n\t\n\t  return keyboard;\n\t}\n\t\n\texports['default'] = {\n\t  defaultLocale: DEFAULT_LOCALE,\n\t\n\t  supports: function supports(locale) {\n\t    return _type2['default'].isObject(_keyboardsJson2['default'][locale]);\n\t  },\n\t\n\t  randomCharNear: function randomCharNear(ch, locale) {\n\t    if (!this.supports(locale)) {\n\t      throw new Error('locale \"' + locale + '\" is not supported');\n\t    }\n\t\n\t    var keyboard = _keyboardsJson2['default'][locale].mapped;\n\t    var threshold = 1;\n\t    var nearbyChars = [];\n\t    var uppercase = /[A-Z]/.test(ch);\n\t\n\t    ch = ch.toLowerCase();\n\t\n\t    var charPosition = keyboard[ch] || [];\n\t    var p = undefined;\n\t\n\t    for (var c in keyboard) {\n\t      if (!keyboard.hasOwnProperty(c) || c === ch) continue;\n\t\n\t      p = keyboard[c];\n\t\n\t      if (Math.abs(charPosition.x - p.x) <= threshold && Math.abs(charPosition.y - p.y) <= threshold) {\n\t        nearbyChars.push(c);\n\t      }\n\t    }\n\t\n\t    var randomChar = nearbyChars.length > 0 ? nearbyChars[_utils2['default'].random(0, nearbyChars.length - 1)] : this.randomChar(locale);\n\t\n\t    if (uppercase) {\n\t      randomChar = randomChar.toUpperCase();\n\t    }\n\t\n\t    return randomChar;\n\t  },\n\t\n\t  randomChar: function randomChar(locale) {\n\t    if (!this.supports(locale)) {\n\t      throw new Error('locale \"' + locale + '\" is not supported');\n\t    }\n\t\n\t    var chars = _keyboardsJson2['default'][locale].list.join('');\n\t    return chars.charAt(_utils2['default'].random(0, chars.length - 1));\n\t  }\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 6 */\n/*!****************************!*\\\n  !*** ./src/keyboards.json ***!\n  \\****************************/\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"en\":[\"qwertyuiop\",\"asdfghjkl\",\"zxcvbnm\"],\"fr\":[\"azertyuiop\",\"qsdfghjklm\",\"wxcvbn\"],\"da\":[\"qwertyuiopå\",\"asdfghjklæø\",\"zxcvbnm\"],\"de\":[\"qwertzuiopü\",\"asdfghjklöä\",\"yxcvbnm\"],\"pl\":[\"qwertyuiopęó\",\"asdfghjkląśł\",\"zxcvbnmżźćń\"],\"pt\":[\"qwertyuiop\",\"asdfghjklç\",\"zxcvbnm\"],\"ru\":[\"йцукенгшщзх\",\"фывапролджэ\",\"ячсмитьбюъ\"],\"es\":[\"qwertyuiop\",\"asdfghjklñ\",\"zxcvbnm\"],\"el\":[\";ςερτυθιοπ\",\"ασδφγηξκλ\",\"ζχψωβνμ\"]}\n\n/***/ }),\n/* 7 */\n/*!********************************!*\\\n  !*** ./src/void-elements.json ***!\n  \\********************************/\n/***/ (function(module, exports) {\n\n\tmodule.exports = [\"area\",\"base\",\"br\",\"col\",\"embed\",\"hr\",\"img\",\"input\",\"keygen\",\"link\",\"menuitem\",\"meta\",\"param\",\"source\",\"track\",\"wbr\"]\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// theater.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ac51a64e251c444904fa","import actor from './actor'\nimport utils from './helpers/utils'\nimport type from './helpers/type'\nimport keyboard from './helpers/keyboard'\nimport html from './helpers/html'\n\nconst NAVIGATOR = typeof window !== 'undefined' && window.navigator\nconst DEFAULTS = {\n  autoplay: true,\n  erase: true,\n  minSpeed: { erase: 80, type: 80 },\n  maxSpeed: { erase: 450, type: 450 },\n  locale: 'detect'\n}\n\nfunction theaterJS (options = {}) {\n  /* ------------------------------------------------- *\\\n    init\n  \\* ------------------------------------------------- */\n\n  options = utils.merge({}, DEFAULTS, options)\n\n  if (type.isNumber(options.minSpeed)) {\n    const { minSpeed } = options\n    options.minSpeed = { erase: minSpeed, type: minSpeed }\n  }\n\n  if (type.isNumber(options.maxSpeed)) {\n    const { maxSpeed } = options\n    options.maxSpeed = { erase: maxSpeed, type: maxSpeed }\n  }\n\n  if (options.locale === 'detect' && NAVIGATOR) {\n    let languages = NAVIGATOR.languages\n    if (type.isArray(languages) && type.isString(languages[0])) {\n      options.locale = languages[0].substr(0, 2)\n    }\n  }\n\n  if (!keyboard.supports(options.locale)) {\n    options.locale = keyboard.defaultLocale\n  }\n\n  let props = { options, casting: {}, status: 'ready', onStage: null, currentScene: -1, scenario: [], events: {} }\n  setCurrentActor(null)\n\n  /* ------------------------------------------------- *\\\n    methods\n  \\* ------------------------------------------------- */\n\n  function addActor (actorName, options = {}, callback = null) {\n    let a = actor(actorName, options, callback)\n    props.casting[a.name] = a\n\n    return this\n  }\n\n  function setCurrentActor (actorName) {\n    props.onStage = actorName\n    return this\n  }\n\n  function getCurrentActor () {\n    return props.casting[props.onStage] || null\n  }\n\n  function addScene (...scenes) {\n    const sequence = []\n\n    function addSceneToSequence (scene) {\n      if (type.isArray(scene)) {\n        scene.forEach(function (s) { addSceneToSequence(s) })\n      }\n\n      if (type.isString(scene)) {\n        let partials = scene.split(':')\n\n        let actorName\n        if (partials.length > 1 && partials[0].charAt(partials[0].length - 1) !== '\\\\') {\n          actorName = partials.shift()\n\n          addSceneToSequence({ name: 'erase', actor: actorName })\n        }\n\n        let speech = partials.join(':').replace(/\\\\:/g, ':')\n        let sceneObj = { name: 'type', args: [speech] }\n\n        if (actorName != null) {\n          sceneObj.actor = actorName\n        }\n\n        addSceneToSequence(sceneObj)\n      }\n\n      if (type.isFunction(scene)) {\n        addSceneToSequence({ name: 'callback', args: [scene] })\n      }\n\n      if (type.isNumber(scene)) {\n        if (scene > 0) {\n          addSceneToSequence({ name: 'wait', args: [scene] })\n        } else {\n          addSceneToSequence({ name: 'erase', args: [scene] })\n        }\n      }\n\n      if (type.isObject(scene)) {\n        if (!type.isArray(scene.args)) {\n          scene.args = []\n        }\n\n        scene.args.unshift(function () {\n          publish(`${scene.name}:end`, scene)\n          playNextScene()\n        })\n\n        sequence.push(scene)\n      }\n    }\n\n    addSceneToSequence([{ name: 'publisher', args: ['sequence:start'] }].concat(scenes).concat({ name: 'publisher', args: ['sequence:end'] }))\n    Array.prototype.push.apply(props.scenario, sequence)\n\n    if (props.options.autoplay) {\n      play()\n    }\n\n    return this\n  }\n\n  function getCurrentSpeech () {\n    const currentScene = props.scenario[props.currentScene]\n    if (!currentScene || !type.isArray(currentScene.args)) return null\n    const [, speech] = currentScene.args\n    return speech || null\n  }\n\n  function play () {\n    if (props.status === 'stopping') {\n      props.status = 'playing'\n    }\n\n    if (props.status === 'ready') {\n      props.status = 'playing'\n      playNextScene()\n    }\n\n    return this\n  }\n\n  function replay (done) {\n    if (props.status === 'ready' || type.isFunction(done)) {\n      props.currentScene = -1\n\n      if (props.status === 'ready') play()\n      else done()\n    }\n\n    return this\n  }\n\n  function stop () {\n    props.status = 'stopping'\n    return this\n  }\n\n  function playNextScene () {\n    if (props.status === 'stopping') {\n      props.status = 'ready'\n      return this\n    }\n\n    if (props.status !== 'playing') return this\n\n    if (props.currentScene + 1 >= props.scenario.length) {\n      props.status = 'ready'\n      publish('scenario:end')\n      return this\n    }\n\n    let nextScene = props.scenario[++props.currentScene]\n\n    if (props.currentScene === 0) {\n      publish('scenario:start')\n    }\n\n    if (nextScene.name === 'publisher') {\n      const [done, ...args] = nextScene.args\n      publish(...args)\n\n      return done()\n    }\n\n    if (nextScene.actor) {\n      setCurrentActor(nextScene.actor)\n    }\n\n    publish(`${nextScene.name}:start`, nextScene)\n\n    switch (nextScene.name) {\n      case 'type':\n        typeAction(...nextScene.args)\n        break\n\n      case 'erase':\n        eraseAction(...nextScene.args)\n        break\n\n      case 'callback':\n        callbackAction(...nextScene.args)\n        break\n\n      case 'wait':\n        waitAction(...nextScene.args)\n        break\n\n      default:\n        console.debug(`No scene handler for ${nextScene.name}`)\n        break\n    }\n\n    return this\n  }\n\n  function typeAction (done, value) {\n    let actor = getCurrentActor()\n\n    let locale = props.options.locale\n    let minSpeed = props.options.minSpeed.type\n    let maxSpeed = props.options.maxSpeed.type\n    let initialValue = actor.displayValue\n    let cursor = -1\n    let isFixing = false\n    let previousMistakeCursor = null\n    let previousFixCursor = null\n\n    let htmlMap = html.map(value)\n    value = html.strip(value)\n\n    ;(function type () {\n      let actual = html.strip(actor.displayValue.substr(initialValue.length))\n\n      if (actual === value) return done()\n\n      let expected = value.substr(0, cursor + 1)\n\n      let isMistaking = actual !== expected\n      let shouldBeMistaken = actor.shouldBeMistaken(actual, value, previousMistakeCursor, previousFixCursor)\n      let shouldFix = isFixing || !shouldBeMistaken\n\n      if (isMistaking && shouldFix) {\n        isFixing = true\n        previousMistakeCursor = null\n        actor.displayValue = initialValue + html.inject(actual.substr(0, actual.length - 1), htmlMap)\n        cursor--\n        previousFixCursor = cursor\n      } else {\n        isFixing = false\n        let nextChar = value.charAt(++cursor)\n\n        if (shouldBeMistaken) {\n          nextChar = keyboard.randomCharNear(nextChar, locale)\n\n          if (previousMistakeCursor == null) {\n            previousMistakeCursor = cursor\n          }\n        }\n\n        actor.displayValue = initialValue + html.inject(actual + nextChar, htmlMap)\n      }\n\n      return setTimeout(type, actor.getTypingSpeed(minSpeed, maxSpeed))\n    })()\n\n    return this\n  }\n\n  function eraseAction (done, arg) {\n    let actor = getCurrentActor()\n\n    // erase scenes are added before a type scene\n    // so for the first scene, there's no actor yet\n    if (actor == null) {\n      return done()\n    }\n\n    if (options.erase !== true) {\n      actor.displayValue = ''\n      return done()\n    }\n\n    let minSpeed = props.options.minSpeed.erase\n    let maxSpeed = props.options.maxSpeed.erase\n\n    let value = actor.displayValue\n    let htmlMap = html.map(value)\n\n    value = html.strip(value)\n\n    let cursor = value.length\n\n    let speed\n    let nbCharactersToErase = 0\n\n    if (type.isNumber(arg)) {\n      if (arg > 0) speed = arg\n      else nbCharactersToErase = value.length + arg\n    }\n\n    (function erase () {\n      if (cursor === nbCharactersToErase) return done()\n      actor.displayValue = html.inject(value.substr(0, --cursor), htmlMap)\n\n      return setTimeout(erase, speed || actor.getTypingSpeed(minSpeed, maxSpeed))\n    })()\n\n    return this\n  }\n\n  function callbackAction (done, callback) {\n    callback.call(this, done)\n    return this\n  }\n\n  function waitAction (done, delay) {\n    setTimeout(done.bind(this), delay)\n    return this\n  }\n\n  function subscribe (events, callback) {\n    events.split(',').forEach(eventName => {\n      eventName = eventName.trim()\n\n      if (!type.isArray(props.events[eventName])) {\n        props.events[eventName] = []\n      }\n\n      props.events[eventName].push(callback)\n    })\n\n    return this\n  }\n\n  function publish (...args) {\n    const eventName = args[0]\n    const callbacks = props.events[eventName] || []\n\n    if (callbacks.length > 0) {\n      callbacks\n        .concat(props.events['*'] || [])\n        .forEach(callback => callback(...args))\n    }\n\n    return this\n  }\n\n  /* ------------------------------------------------- *\\\n    public api\n  \\* ------------------------------------------------- */\n\n  return Object.freeze({\n    get options () { return props.options },\n    get status () { return props.status },\n    addActor,\n    getCurrentActor,\n    addScene,\n    getCurrentSpeech,\n    play,\n    replay,\n    stop,\n    on: subscribe\n  })\n}\n\ntheaterJS.init = function (actorName = 'actor') {\n  let theater = theaterJS()\n  theater.addActor(actorName, { accuracy: 1, speed: 0.8 })\n  return theater\n}\n\nexport default theaterJS\n\n\n\n// WEBPACK FOOTER //\n// ./src/theaterJS.js","function toString (o) {\n  return {}.toString.call(o)\n}\n\nexport default {\n  isNumber: function (o) {\n    return typeof o === 'number'\n  },\n\n  isString: function (o) {\n    return toString(o) === '[object String]'\n  },\n\n  isObject: function (o) {\n    return toString(o) === '[object Object]'\n  },\n\n  isArray: function (o) {\n    return toString(o) === '[object Array]'\n  },\n\n  isFunction: function (o) {\n    return typeof o === 'function'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/type.js","export default {\n  merge (dst) {\n    let objs = [].slice.call(arguments, 1)\n\n    for (let i = 0, len = objs.length; i < len; i++) {\n      let obj = objs[i]\n\n      for (let key in obj) {\n        if (!obj.hasOwnProperty(key)) continue\n        dst[key] = obj[key]\n      }\n    }\n\n    return dst\n  },\n\n  random (min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min\n  },\n\n  randomFloat (min, max) {\n    return Math.random() * (max - min) + min\n  },\n\n  getPercentageOf (min, max, percentage) {\n    return (min - (min * percentage)) + (max * percentage)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/utils.js","import type from './helpers/type'\nimport utils from './helpers/utils'\n\nconst DOCUMENT = typeof window !== 'undefined' && window.document\nconst DEFAULTS = { speed: 0.6, accuracy: 0.6 }\n\nexport default function (actorName, props = {}, callback = null) {\n  let displayValue = ''\n  let $element\n\n  if (type.isNumber(props)) {\n    props = { speed: props, accuracy: props }\n  }\n\n  props = utils.merge({}, DEFAULTS, props)\n\n  if (DOCUMENT) {\n    if (callback == null) {\n      callback = `#${actorName}`\n    }\n\n    if (type.isString(callback)) {\n      let selector = callback\n      let $e = DOCUMENT.querySelector(selector)\n\n      if ($e != null) {\n        $element = $e\n        callback = function (newValue) { $element.innerHTML = newValue }\n      } else {\n        throw new Error(`no matches for ${actorName}'s selector: ${selector}`)\n      }\n    }\n  }\n\n  if (!type.isFunction(callback)) {\n    callback = console.log.bind(console)\n  }\n\n  return {\n    $element,\n\n    get displayValue () {\n      return displayValue\n    },\n\n    set displayValue (value) {\n      displayValue = value\n      callback(value)\n    },\n\n    get name () {\n      return actorName\n    },\n\n    getTypingSpeed (fastest, slowest) {\n      let speed = utils.randomFloat(props.speed, 1)\n      return utils.getPercentageOf(slowest, fastest, speed)\n    },\n\n    shouldBeMistaken (actual, endValue, previousMistakeCursor = null, previousFixCursor = null) {\n      let accuracy = props.accuracy * 10\n\n      if (accuracy >= 8) {\n        return false\n      }\n\n      if (actual.length <= accuracy) {\n        return false\n      }\n\n      if (actual.length === endValue.length) {\n        return false\n      }\n\n      if (type.isNumber(previousMistakeCursor)) {\n        let nbOfCharactersTyped = actual.length - previousMistakeCursor\n        let maxWrongCharactersAllowed = accuracy >= 6 ? 10 - accuracy : 4\n\n        if (nbOfCharactersTyped >= maxWrongCharactersAllowed) {\n          return false\n        }\n      }\n\n      if (type.isNumber(previousFixCursor)) {\n        let nbOfCharactersTyped = actual.length - previousFixCursor\n        let minCharactersBetweenMistakes = Math.max(accuracy, 2) * 2\n\n        if (nbOfCharactersTyped <= minCharactersBetweenMistakes) {\n          return false\n        }\n      }\n\n      return utils.randomFloat(0, 0.8) > props.accuracy\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actor.js","import voidElements from '../void-elements.json'\n\nfunction isVoidElement (tag) {\n  const tagName = tag.match(/<([^\\s>]+)/)\n  return Boolean(tagName) && voidElements.indexOf(tagName[1].toLowerCase()) > -1\n}\n\nexport default {\n  strip (str) {\n    return str.replace(/(<([^>]+)>)/gi, '')\n  },\n\n  map (str) {\n    let regexp = /<[^>]+>/gi\n    let tags = []\n    let openers = []\n    let result\n    let tag\n\n    while ((result = regexp.exec(str))) {\n      tag = {\n        tagName: result[0],\n        position: result.index\n      }\n\n      if (tag.tagName.charAt(1) === '/') {\n        tag.opener = openers.pop()\n      } else if (tag.tagName.charAt(tag.tagName.length - 2) !== '/' && !isVoidElement(tag.tagName)) {\n        openers.push(tag)\n      }\n\n      tags.push(tag)\n    }\n\n    return tags\n  },\n\n  inject (str, map) {\n    for (let i = 0, tag; i < map.length; i++) {\n      tag = map[i]\n\n      if (str.length > 0 && tag.position <= str.length) {\n        str = str.substr(0, tag.position) + tag.tagName + str.substr(tag.position)\n      } else if (tag.opener && tag.opener.position < str.length) {\n        str += tag.tagName\n      }\n    }\n\n    return str\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/html.js","import type from './type'\nimport utils from './utils'\nimport keyboards from '../keyboards.json'\nconst DEFAULT_LOCALE = 'en'\n\nfor (let locale in keyboards) {\n  if (!keyboards.hasOwnProperty(locale)) continue\n\n  let keyboard = keyboards[locale]\n  keyboards[locale] = { list: keyboard, mapped: mapKeyboard(keyboard) }\n}\n\nfunction mapKeyboard (alphabet) {\n  let keyboard = {}\n\n  for (let y = 0, lines = alphabet.length, chars; y < lines; y++) {\n    chars = alphabet[y]\n\n    for (let x = 0, charsLength = chars.length; x < charsLength; x++) {\n      keyboard[chars[x]] = { x: x, y: y }\n    }\n  }\n\n  return keyboard\n}\n\nexport default {\n  defaultLocale: DEFAULT_LOCALE,\n\n  supports (locale) {\n    return type.isObject(keyboards[locale])\n  },\n\n  randomCharNear (ch, locale) {\n    if (!this.supports(locale)) {\n      throw new Error(`locale \"${locale}\" is not supported`)\n    }\n\n    let keyboard = keyboards[locale].mapped\n    let threshold = 1\n    let nearbyChars = []\n    let uppercase = /[A-Z]/.test(ch)\n\n    ch = ch.toLowerCase()\n\n    let charPosition = keyboard[ch] || []\n    let p\n\n    for (let c in keyboard) {\n      if (!keyboard.hasOwnProperty(c) || c === ch) continue\n\n      p = keyboard[c]\n\n      if (Math.abs(charPosition.x - p.x) <= threshold && Math.abs(charPosition.y - p.y) <= threshold) {\n        nearbyChars.push(c)\n      }\n    }\n\n    let randomChar =\n      nearbyChars.length > 0\n      ? nearbyChars[utils.random(0, nearbyChars.length - 1)]\n      : this.randomChar(locale)\n\n    if (uppercase) {\n      randomChar = randomChar.toUpperCase()\n    }\n\n    return randomChar\n  },\n\n  randomChar: function (locale) {\n    if (!this.supports(locale)) {\n      throw new Error(`locale \"${locale}\" is not supported`)\n    }\n\n    let chars = keyboards[locale].list.join('')\n    return chars.charAt(utils.random(0, chars.length - 1))\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/keyboard.js","module.exports = {\"en\":[\"qwertyuiop\",\"asdfghjkl\",\"zxcvbnm\"],\"fr\":[\"azertyuiop\",\"qsdfghjklm\",\"wxcvbn\"],\"da\":[\"qwertyuiopå\",\"asdfghjklæø\",\"zxcvbnm\"],\"de\":[\"qwertzuiopü\",\"asdfghjklöä\",\"yxcvbnm\"],\"pl\":[\"qwertyuiopęó\",\"asdfghjkląśł\",\"zxcvbnmżźćń\"],\"pt\":[\"qwertyuiop\",\"asdfghjklç\",\"zxcvbnm\"],\"ru\":[\"йцукенгшщзх\",\"фывапролджэ\",\"ячсмитьбюъ\"],\"es\":[\"qwertyuiop\",\"asdfghjklñ\",\"zxcvbnm\"],\"el\":[\";ςερτυθιοπ\",\"ασδφγηξκλ\",\"ζχψωβνμ\"]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/keyboards.json\n// module id = 6\n// module chunks = 0","module.exports = [\"area\",\"base\",\"br\",\"col\",\"embed\",\"hr\",\"img\",\"input\",\"keygen\",\"link\",\"menuitem\",\"meta\",\"param\",\"source\",\"track\",\"wbr\"]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/void-elements.json\n// module id = 7\n// module chunks = 0"],"sourceRoot":""}